<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
    <link rel="stylesheet" href="style/main.css" type="text/css">
  </head>
  <body>
    <h1>Hello !</h1>
    <div id="pointStatus">...</div>
  </body>
  <script src="vendor/couchapp/loader.js"></script>
  <script type="text/javascript">
    var start = new Date();
    var points = [];

    var pointsRecorder = function () {
        // console.log("Recording points! Current count: ", points.length);
        var chunkSize = 30;
        var pointsToSave = points.slice(0,chunkSize);
        points = points.slice(chunkSize);
        // console.log("Saving ",pointsToSave.length," points");
        if(pointsToSave.length) {
            jQuery('#pointStatus').html('Saving '+pointsToSave.length+' points, '+points.length+' points queued');
        } else {
            jQuery('#pointStatus').html('...');
        }
    };

    setInterval(pointsRecorder, 250);

    jQuery('html').mousemove(function(e) {
        var point = [e.timeStamp-start, e];
        points.push(point);
        // console.log(e.timeStamp - start, e,e.pageX, e.pageY);
    });
  </script>
</html>
